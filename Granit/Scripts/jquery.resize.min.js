(function(n){function it(){if(!h){var t=(y?y:"")+".resize-triggers { "+(p?p:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css";n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t));i.appendChild(n);h=!0}}function rt(){if(!c){var t=".fontResize-trigger { visibility: hidden; position: absolute; top: 0; left: 0; height: 10em; width: 10em; }",i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css";n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t));i.appendChild(n);c=!0}}function ut(n){var t=this,i=t.__fontResizeTrigger__.offsetHeight/10;t.__resizeLast__.fontSize!==i&&(t.__resizeLast__.fontSize=i,t.__fontResizeListeners__.forEach(function(r){r.call(t,{fontSize:i},n)}))}var i=document.attachEvent,h=!1,c=!1,k=n.fn.resize,d=n.fn.fontResize,l,a,t,w,b;if(n.fn.resize=function(n){return this.each(function(){this==window?k.call(jQuery(this),n):addResizeListener(this,n)})},n.fn.removeResize=function(n){return this.each(function(){removeResizeListener(this,n)})},n.fn.fontResize=function(n){return this.each(function(){this==window?d.call(jQuery(this),n):w(this,n)})},n.fn.removeFontResize=function(n){return this.each(function(){b(this,n)})},!i){l=function(){var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(n){return window.setTimeout(n,20)};return function(t){return n(t)}}();a=function(){var n=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return n(t)}}();function resetTriggers(n){var r=n.__resizeTriggers__,t=r.firstElementChild,i=r.lastElementChild,u=t.firstElementChild;i.scrollLeft=i.scrollWidth;i.scrollTop=i.scrollHeight;u.style.width=t.offsetWidth+1+"px";u.style.height=t.offsetHeight+1+"px";t.scrollLeft=t.scrollWidth;t.scrollTop=t.scrollHeight}function g(n){return n.offsetWidth!=n.__resizeLast__.width||n.offsetHeight!=n.__resizeLast__.height}function scrollListener(n){var t=this;resetTriggers(this);this.__resizeRAF__&&a(this.__resizeRAF__);this.__resizeRAF__=l(function(){g(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(i){i.call(t,n)}))})}var r=!1,nt="animation",u="",f="animationstart",e="Webkit Moz O ms".split(" "),tt="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),o="",v=document.createElement("fakeelement");if(v.style.animationName!==undefined&&(r=!0),r===!1)for(t=0;t<e.length;t++)if(v.style[e[t]+"AnimationName"]!==undefined){o=e[t];nt=o+"Animation";u="-"+o.toLowerCase()+"-";f=tt[t];r=!0;break}var s="resizeanim",y="@"+u+"keyframes "+s+" { from { opacity: 0; } to { opacity: 0; } } ",p=u+"animation: 1ms "+s+"; "}window.addResizeListener=function(n,t){i?n.attachEvent("onresize",t):(n.__resizeTriggers__||(getComputedStyle(n).position=="static"&&(n.style.position="relative"),it(),n.__resizeLast__={},n.__resizeListeners__=[],(n.__resizeTriggers__=document.createElement("div")).className="resize-triggers",n.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div><\/div><\/div><div class="contract-trigger"><\/div>',n.appendChild(n.__resizeTriggers__),resetTriggers(n),n.addEventListener("scroll",scrollListener,!0),f&&n.__resizeTriggers__.addEventListener(f,function(t){t.animationName==s&&resetTriggers(n)})),n.__resizeListeners__.push(t))};window.removeResizeListener=function(n,t){i?n.detachEvent("onresize",t):(n.__resizeListeners__.splice(n.__resizeListeners__.indexOf(t),1),n.__resizeListeners__.length||(n.removeEventListener("scroll",scrollListener),n.__resizeTriggers__=!n.removeChild(n.__resizeTriggers__)))};w=function(t,i){t.__fontResizeTrigger__||(t.__fontResizeListeners__=[],t.__fontResizeLast__={},rt(),(t.__fontResizeTrigger__=document.createElement("div")).className="fontResize-trigger",t.appendChild(t.__fontResizeTrigger__),n(t.__fontResizeTrigger__).resize(n.proxy(ut,t)));t.__fontResizeListeners__.push(i)};b=function(n,t){n.__fontResizeListeners__.splice(n.__fontResizeListeners__.indexOf(t),1);n.__fontResizeListeners__.length||(n.__fontResizeTrigger__=!n.removeChild(n.__fontResizeTrigger__))}})(jQuery);